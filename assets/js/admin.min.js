!function(e){"use strict";function t(){e(".mek-color-field").wpColorPicker({change:function(t,n){var o=t.target;e(o).parents("[data-mek-change-monitor]").find('input[type="submit"]').prop("disabled",!1)}})}function n(){e(".mek-delete-theme").on("click",(function(){o(e(this));var t=e(this).parents("[data-mek-theme-index]");e("#mek-default-theme").find('option[value="'+t.data("mek-theme-index")+'"]').remove(),t.remove()})),e(".mek-toggle-theme-palette").on("click",(function(){e(this).find("span").toggleClass("dashicons-arrow-left-alt2").toggleClass("dashicons-arrow-down-alt2"),e(this).parents("[data-mek-theme-index]").find(".mek-theme-palette").toggle()}))}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.parents("[data-mek-change-monitor]").find('input[type="submit"]').prop("disabled",!t)}function a(){var t=e('[data-mek-change-monitor] input[type="submit"]');t.prop("disabled",!0),t.on("click",(function(){var t=e(this);return e(this).parents("[data-mek-change-monitor]").ajaxSubmit({success:function(){e.toast({text:"Settings Saved!",position:"bottom-right",bgColor:"#10b981",textColor:"#ffffff",loaderBg:"#34d399"}),o(t,!1)},error:function(){e.toast({text:"Something went wrong!",position:"bottom-right",bgColor:"#dc2626",textColor:"#ffffff",loaderBg:"#ef4444"})}}),!1})),e("[data-mek-change-monitor]").find("input, select").on("change",(function(){o(e(this))})),e(window).on("beforeunload",(function(){if(t.length>0&&!t.prop("disabled"))return"You have unsaved settings, are you sure you want to leave?"}))}function i(){var a=wp.template("mek-theme-template"),i=e(".mek-themes-container"),m=e("#mek-default-theme");Object.keys(MEKThemes.themes).forEach((function(e){var t=MEKThemes.themes[e];i.append(a({index:e,label:t.label,palette:Object.assign({},MEKThemes.palette,t.palette)}))})),t(),n(),e("#mek-create-new-theme").on("click",(function(){var d=e("#mek-new-theme-label").val(),c=0;i.find("[data-mek-theme-index]").each((function(){e(this).data("mek-theme-index")>c&&(c=e(this).data("mek-theme-index"))})),i.append(a({index:c+1,label:d,palette:MEKThemes.palette})),m.append('<option value="'+(c+1)+'">'+d+"</option>"),o(e(this)),t(),n()}))}e(document).ready((function(e){t(),e("#mek-element-toggle-all").on("change",(function(){e(this).is(":checked")?e(".mek-elements").find('input[type="checkbox"]').prop("checked",!0):e(".mek-elements").find('input[type="checkbox"]').prop("checked",!1)})),void 0!==window.MEKThemes&&i(),a()}))}(jQuery);